<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Registration Form â€” Bootstrap Validation</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light d-flex align-items-center justify-content-center min-vh-100">
  <main class="card shadow-lg p-4 rounded-4" style="max-width: 480px; width: 100%">
    <h2 class="mb-3">Create Account</h2>

    <form id="regForm" novalidate>
      <div class="mb-3">
        <label for="name" class="form-label">Full name</label>
        <input id="name" name="name" type="text" class="form-control" placeholder="Your name" required />
        <div class="invalid-feedback" id="nameError"></div>
      </div>

      <div class="mb-3">
        <label for="email" class="form-label">Email address</label>
        <input id="email" name="email" type="email" class="form-control" placeholder="you@example.com" required />
        <div class="invalid-feedback" id="emailError"></div>
      </div>

      <div class="mb-3">
        <label for="password" class="form-label">Password</label>
        <div class="input-group">
          <input id="password" name="password" type="password" class="form-control" placeholder="At least 8 characters" required />
          <button type="button" class="btn btn-outline-secondary" id="togglePwd">Show</button>
        </div>
        <div class="form-text">Minimum 8 chars, include uppercase, lowercase, number and special character.</div>
        <div class="invalid-feedback" id="passwordError"></div>
      </div>

      <div class="mb-3">
        <label for="confirm" class="form-label">Confirm password</label>
        <input id="confirm" name="confirm" type="password" class="form-control" placeholder="Re-enter password" required />
        <div class="invalid-feedback" id="confirmError"></div>
      </div>

      <div class="d-grid">
        <button id="submitBtn" type="submit" class="btn btn-primary">Register</button>
      </div>
      <div id="formMsg" class="mt-3"></div>
    </form>
  </main>

  <script>
    const form = document.getElementById('regForm');
    const nameInput = document.getElementById('name');
    const emailInput = document.getElementById('email');
    const pwdInput = document.getElementById('password');
    const confirmInput = document.getElementById('confirm');
    const formMsg = document.getElementById('formMsg');

    const nameError = document.getElementById('nameError');
    const emailError = document.getElementById('emailError');
    const pwdError = document.getElementById('passwordError');
    const confirmError = document.getElementById('confirmError');

    function isValidName(name) {
      return name.trim().length >= 3;
    }

    function isValidEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email);
    }

    function isValidPassword(pw) {
      const re = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^A-Za-z0-9]).{8,}$/;
      return re.test(pw);
    }

    function validateName() {
      if (!isValidName(nameInput.value)) {
        nameInput.classList.add('is-invalid');
        nameError.textContent = 'Enter at least 3 characters.';
        return false;
      }
      nameInput.classList.remove('is-invalid');
      return true;
    }

    function validateEmail() {
      if (!isValidEmail(emailInput.value)) {
        emailInput.classList.add('is-invalid');
        emailError.textContent = 'Enter a valid email address.';
        return false;
      }
      emailInput.classList.remove('is-invalid');
      return true;
    }

    function validatePassword() {
      if (!isValidPassword(pwdInput.value)) {
        pwdInput.classList.add('is-invalid');
        pwdError.textContent = 'Password must include uppercase, lowercase, number, and special char.';
        return false;
      }
      pwdInput.classList.remove('is-invalid');
      return true;
    }

    function validateConfirm() {
      if (pwdInput.value !== confirmInput.value || !confirmInput.value) {
        confirmInput.classList.add('is-invalid');
        confirmError.textContent = 'Passwords do not match.';
        return false;
      }
      confirmInput.classList.remove('is-invalid');
      return true;
    }

    document.getElementById('togglePwd').addEventListener('click', function () {
      const isPwd = pwdInput.type === 'password';
      pwdInput.type = isPwd ? 'text' : 'password';
      confirmInput.type = isPwd ? 'text' : 'password';
      this.textContent = isPwd ? 'Hide' : 'Show';
    });

    form.addEventListener('submit', function (e) {
      e.preventDefault();
      formMsg.innerHTML = '';

      const validName = validateName();
      const validEmail = validateEmail();
      const validPwd = validatePassword();
      const validConfirm = validateConfirm();

      if (!(validName && validEmail && validPwd && validConfirm)) {
        formMsg.innerHTML = '<div class="alert alert-danger">Please fix the errors above and try again.</div>';
        return;
      }

      formMsg.innerHTML = '<div class="alert alert-success">Registration successful! (demo)</div>';
      form.reset();
      [nameInput, emailInput, pwdInput, confirmInput].forEach(i => i.classList.remove('is-invalid'));
    });

    [nameInput, emailInput, pwdInput, confirmInput].forEach(input => {
      input.addEventListener('blur', () => {
        if (input === nameInput) validateName();
        if (input === emailInput) validateEmail();
        if (input === pwdInput) validatePassword();
        if (input === confirmInput) validateConfirm();
      });
    });
  </script>
</body>
</html>